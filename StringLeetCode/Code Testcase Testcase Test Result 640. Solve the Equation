class Solution {
public:
    string solveEquation(string equation) {
        int n = equation.size();
        int coeff = 0;   // coefficient of x
        int constant = 0;
        
        int sign = 1;    // +1 or -1
        int num = 0;
        bool isLeft = true;   // left side of '='
        bool hasNum = false;
        
        for (int i = 0; i <= n; i++) {
            if (i < n && isdigit(equation[i])) {
                num = num * 10 + (equation[i] - '0');
                hasNum = true;
            } 
            else if (i < n && equation[i] == 'x') {
                if (!hasNum) num = 1;
                coeff += sign * num * (isLeft ? 1 : -1);
                num = 0;
                hasNum = false;
            } 
            else {
                constant += sign * num * (isLeft ? -1 : 1);
                num = 0;
                hasNum = false;
                
                if (i < n) {
                    if (equation[i] == '+') sign = 1;
                    else if (equation[i] == '-') sign = -1;
                    else if (equation[i] == '=') {
                        isLeft = false;
                        sign = 1;
                    }
                }
            }
        }
        
        if (coeff == 0 && constant == 0)
            return "Infinite solutions";
        if (coeff == 0)
            return "No solution";
        
        return "x=" + to_string(constant / coeff);
    }
};
