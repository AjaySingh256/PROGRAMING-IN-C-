class Solution {
public:
    bool validUtf8(vector<int>& data) {
        int remaining = 0;

        for (int byte : data) {
            if (remaining == 0) {
                if ((byte >> 5) == 0b110) remaining = 1;          // 2-byte char
                else if ((byte >> 4) == 0b1110) remaining = 2;   // 3-byte char
                else if ((byte >> 3) == 0b11110) remaining = 3;  // 4-byte char
                else if ((byte >> 7) == 0) remaining = 0;        // 1-byte char
                else return false;
            } else {
                if ((byte >> 6) != 0b10) return false;
                remaining--;
            }
        }
        return remaining == 0;
    }
};
